@using System.Web.Mvc.Html
@using AION.Web.Extensions
@using AION.Web.Models

@model AION.Web.Models.SchedulePlanReviewViewModel

@{
    /**/

    ViewBag.Title = "Schedule Express";


    bool isenabled = !Model.IsReadOnly;
    string disabledcls = Model.DisabledCls;
    string disablebtn = Model.DisabledHtml;
    string readonlytxt = Model.ReadonlyHtml;

    bool hasManualPerm = Model.PermissionMapping.Schdul_Express_Man;

    //for hidden fields for javascript file
    string strIsEstimationComplete = Model.IsEstimationComplete ? "true" : "false";
    //  only show the agencies they can estimate
    string isagencyestimator = Model.PermissionMapping.IsAgencyEstimator ? "true" : "false";
    string isceestimator = Model.PermissionMapping.IsTradeEstimator ? "true" : "false";
    string isbempestimator = Model.PermissionMapping.IsBEMPAllowed ? "true" : "false";
    string iszoneestimator = Model.PermissionMapping.IsZoneAllowed ? "true" : "false";
    string isfireestimator = Model.PermissionMapping.IsFireAllowed ? "true" : "false";
    string isbackflowestimator = Model.PermissionMapping.IsBackFlowAllowed ? "true" : "false";
    string ishealthestimator = Model.PermissionMapping.IsHealthAllowed ? "true" : "false";
}
@section style{
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/forms/icheck/icheck.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/ui/jquery-ui.min.css">

    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/tables/datatable/datatables.min.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/tables/extensions/fixedHeader.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/tables/extensions/colReorder.dataTables.min.css" />
}
@section scripts{
    <script src="/app-assets/vendors/js/forms/validation/jquery.validate.min.js"></script>
    <script src="/app-assets/js/scripts/custom/register-selected-item-changed-event.js"></script>

    <script src="/app-assets/js/scripts/navs/navs.js"></script>
    @*datatables*@
    <script src="~/app-assets/vendors/js/tables/datatable/datatables.min.js"></script>
    <script src="~/app-assets/vendors/js/tables/datatable/dataTables.responsive.min.js"></script>
    <script src="~/app-assets/vendors/js/tables/datatable/dataTables.fixedHeader.min.js"></script>
    <script src="~/app-assets/vendors/js/tables/datatable/dataTables.colReorder.min.js"></script>

    <script src="/app-assets/vendors/js/forms/icheck/icheck.min.js"></script>
    <script src="/app-assets/js/scripts/forms/checkbox-radio.js"></script>

    <script src="/app-assets/js/scripts/custom/select-lists.js"></script>

    <script type="text/javascript" src="~/app-assets/js/scripts/pages/scheduling/shared/standard-notes.js"></script>

    <script type="text/javascript" src="~/app-assets/js/scripts/pages/scheduling/schedule-express-meeting.js"></script>

    <script type="text/javascript" src="~/app-assets/js/scripts/custom/set-tabs-permissions.js"></script>

    <script type="text/javascript" src="~/app-assets/js/scripts/custom/add-meeting-rooms-modal.js"></script>
}


@section breadcrumbs {
    @Html.Partial("_Breadcrumbs", Model)
}

@using (Html.BeginForm("SaveExpressMeeting", "Scheduling", FormMethod.Post, new { @id = "SchedulingForm" }))
{
    @Html.HiddenFor(m => m.Project.AccelaProjectRefId, Model.Project.AccelaProjectRefId)
    @Html.HiddenFor(m => m.Project.AccelaProjectRefId, new { @id = "AccelaProjectRefId" })
    @Html.HiddenFor(m => m.Project.RecIdTxt, new { @id = "recidtxt" })
    @Html.HiddenFor(m => m.RecIdTxt, Model.Project.RecIdTxt)
    @Html.HiddenFor(m => m.FireAgency)
    @Html.HiddenFor(m => m.ZoneAgency)
    @Html.HiddenFor(m => m.MeetingRoomNameSelected, new { @class = "meetingroomname", id = "meetingroomname" })
    @*//  only show the agencies they can estimate*@
    <input type="hidden" id="hIsagencyestimator" value="@isagencyestimator" />
    <input type="hidden" id="hIsceestimator" value="=@isceestimator" />
    <input type="hidden" id="hIsbempestimator" value="=@isbempestimator" />
    <input type="hidden" id="hIszoneestimator" value="=@iszoneestimator" />
    <input type="hidden" id="hIsfireestimator" value="=@isfireestimator" />
    <input type="hidden" id="hIsbackflowestimator" value="=@isbackflowestimator" />
    <input type="hidden" id="hIshealthestimator" value="=@ishealthestimator" />
    <input type="hidden" id="hIsestimationcomplete" value="@strIsEstimationComplete" />

    <input type="hidden" id="hStartTime" value="@Model.StartTime" />
    <input type="hidden" id="hEndTime" value="@Model.EndTime" />
    <input type="hidden" id="hReserverdExpressDatesList" value="@Model.ReservedExpressDates" />
    <input type="hidden" id="hScheduleDate" value="@Model.ScheduleDate" />

    ////mark this as express for the meeting rooms js
    <input type="hidden" id="hIsExpress" name="hIsExpress" value="true" />

    @Html.HiddenFor(m => m.IsAllNAChecked, new { @id = "hfIsAllNAChecked" })
    @Html.HiddenFor(m => m.Project.AccelaProjectRefId, Model.Project.AccelaProjectRefId)
    @Html.HiddenFor(m => m.Project.ID)
    @Html.HiddenFor(m => m.Project.AIONProjectStatus)
    @Html.HiddenFor(m => m.Project.AIONProjectStatus.ID, @Model.Project.AIONProjectStatus.ID)
    @Html.HiddenFor(m => m.LoggedInUser.ID, @Model.LoggedInUser.ID)
    @Html.HiddenFor(m => m.LoggedInUserEmail, @Model.LoggedInUserEmail)
    @Html.HiddenFor(m => m.UpdateDate, Model.UpdateDate)
    @Html.HiddenFor(m => m.IsReschedule, Model.IsReschedule)
    @Html.HiddenFor(m => m.IsFutureCycle, Model.IsFutureCycle)
    @Html.HiddenFor(m => m.Cycle, new { @id = "cycleNumber" })
    @Html.HiddenFor(m => m.PreviousAssignedFacilitator, new { @id = "PreviousAssignedFacilitatorId" })
    <input type="hidden" id="IsSubmit" name="IsSubmit" value="true" />
    <input type="hidden" id="SaveType" name="SaveType" value="1" />
    <input type="hidden" id="PendingEmailType" name="PendingEmailType" value="" />
    @Html.HiddenFor(x => x.IsNewCycle)
    @Html.HiddenFor(x => x.Cycle)

    @Html.Partial("_AutoScheduleAudit", Model)


    <div id="sectionPlanReview" class="collapse show">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
                        <div class="heading-elements">
                            <div class="error alert alert-danger" id="statusmessage">@Model.StatusMessage</div>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="card-header">
                            <h4 class="card-title">Project Summary</h4>
                        </div>
                        <div class="card-body">
                            @Html.Partial("_ProjectSummary", Model)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mt-3">
                                <div class="form-group">
                                    <label>Date:</label>
                                    <div class="input-group">
                                        @if (hasManualPerm)
                                        {
                                            @Html.EditorFor(model => model.ScheduleDate,
                                                new { htmlAttributes = new { @id = "startdatesel", @class = "form-control border-cyan datepicker-express", @inputmode = "none", @Value = Model.ScheduleDate?.ToShortDateString() } })
                                        }
                                        else
                                        {
                                            @Html.HiddenFor(m => m.ScheduleDate, new { @id = "startdatesel" })
                                            @Html.TextBox("disabledScheduleDate", Model.ScheduleDate.HasValue ? Model.ScheduleDate.Value.ToShortDateString() : string.Empty, new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                        }
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <span class="fa fa-calendar-o"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mt-3">
                                <div class="form-group">
                                    <label for="StartDate">Start Time</label>
                                    <div class="input-group">
                                        @{
                                            if (hasManualPerm)
                                            {
                                                @Html.EditorFor(model => model.StartTime, new { htmlAttributes = new { @id = "starttimesel", @class = "border-cyan form-control pickatime-minmax", @Value = Model.StartTime?.ToString("h:mm tt") } })
                                            }
                                            else
                                            {
                                                @Html.HiddenFor(m => m.StartTime, new { @id = "starttimesel" })
                                                @Html.TextBox("disabledStartTime", Model.StartTime.HasValue ? Model.StartTime.Value.ToShortTimeString() : string.Empty, new { @disabled = "disabled", @readonly = "readonly", @class = "border-cyan form-control pickatime-minmax" })
                                            }
                                        }
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <span class="fa fa-clock-o"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mt-3">
                                <div class="form-group">
                                    <label for="EndDate">End Time</label>
                                    <div class="input-group">
                                        @{
                                            if (hasManualPerm)
                                            {
                                                @Html.EditorFor(model => model.EndTime, new { htmlAttributes = new { @id = "endtimesel", @class = "border-cyan form-control pickatime-minmax", @Value = Model.EndTime?.ToString("h:mm tt") } })
                                            }
                                            else
                                            {
                                                @Html.HiddenFor(m => m.EndTime, new { @id = "endtimesel" })
                                                @Html.TextBox("disabledEndTime", Model.EndTime.HasValue ? Model.EndTime.Value.ToShortTimeString() : string.Empty, new { @disabled = "disabled", @readonly = "readonly", @class = "border-cyan form-control pickatime-minmax" })
                                            }
                                        }
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <span class="fa fa-clock-o"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mt-1">
                                <label>Meeting Room:</label>
                                <div class="form-group">
                                    @{
                                        string meetingroomcls = hasManualPerm ? "openmeetingrooms" : "disabled";
                                    }
                                    <label for="meetingroomrefid" class="meetinglabeltxt">
                                        *Meeting Room:
                                        <a class="@meetingroomcls meetingroomnamelabel" data-toggle="modal" data-target="#meeting-room-modal" href="#">
                                            - @Model.MeetingRoomNameSelected -
                                        </a>
                                        @Html.HiddenFor(m => m.MeetingRoomRefIDSelected, new { @class = "meetingroomrefid", @id = "meetingroomrefid" })
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="meetinglabeltxt">
                                        Requested Dates:
                                    </label>
                                </div>

                                @if (Model.ProposedDate1.HasValue)
                                {
                                    <div>
                                        <label>@string.Format("{0:MM/dd/yyyy}", Model.ProposedDate1)</label>
                                    </div>
                                }
                                @if (Model.ProposedDate2.HasValue)
                                {
                                    <div>
                                        <label>@string.Format("{0:MM/dd/yyyy}", Model.ProposedDate2)</label>
                                    </div>
                                }
                                @if (Model.ProposedDate3.HasValue)
                                {
                                    <div>
                                        <label>@string.Format("{0:MM/dd/yyyy}", Model.ProposedDate3)</label>
                                    </div>
                                }
                            </div>
                        </div>

                        <h4 class="form-section mt-3"><i class="fa fa-group"></i> Select Plan Reviewers</h4>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label> *Building:</label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewersAllReviewersBuilding, new { @id = "scheduledReviewerBuildingName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerBuilding, new { @id = "scheduledReviewerBuilding", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label>
                                        *Electrical:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersElectrical, new { @id = "scheduledReviewerElectricalName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerElectrical, new { @id = "scheduledReviewerElectrical", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="scheduledReviewerMechanicalName" class="meetinglabeltxt">
                                        *Mechanical:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersMechanical, new { @id = "scheduledReviewerMechanicalName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerMechanical, new { @id = "scheduledReviewerMechanical", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="scheduledReviewerPlumbingName" class="meetinglabeltxt">
                                        *Plumbing:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersPlumbing, new { @id = "scheduledReviewerPlumbingName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerPlumbing, new { @id = "scheduledReviewerPlumbing", @class = "scheduledreviewer" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="scheduledReviewerZoneName" class="meetinglabeltxt">
                                        *Zone:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersZone, new { @id = "scheduledReviewerZoneName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerZone, new { @id = "scheduledReviewerZone", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="scheduledReviewerFireName" class="meetinglabeltxt">
                                        *Fire:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersFire, new { @id = "scheduledReviewerFireName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerFire, new { @id = "scheduledReviewerFire", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="scheduledReviewerBackflowName" class="meetinglabeltxt">
                                        *BackFlow:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersBackflow, new { @id = "scheduledReviewerBackflowName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerBackFlow, new { @id = "scheduledReviewerBackflow", @class = "scheduledreviewer" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="scheduledReviewerFoodName" class="meetinglabellgtxt">
                                        *Food Service:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersFood, new { @id = "scheduledReviewerFoodName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerFood, new { @id = "scheduledReviewerFood", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="scheduledReviewerPoolName" class="meetinglabellgtxt">
                                        *Public Pool:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersPool, new { @id = "scheduledReviewerPoolName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerPool, new { @id = "scheduledReviewerPool", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="scheduledReviewerFacilitiesName" class="meetinglabellgtxt">
                                        *Facility/Lodging:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersFacilities, new { @id = "scheduledReviewerFacilitiesName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerFacilities, new { @id = "scheduledReviewerFacilities", @class = "scheduledreviewer" })
                                </div>
                                <div class="form-group">
                                    <label for="DrpDnScheduleDayCare" class="meetinglabellgtxt">
                                        *Day Care:
                                    </label>
                                    @Html.TextBox("scheduledReviewerName", Model.DisplayScheduledReviewerAllReviewersDaycare, new { @id = "scheduledReviewerDayCareName", @disabled = "disabled", @readonly = "readonly", @class = "form-control reviewerddl" })
                                    @Html.HiddenFor(m => m.ScheduledReviewerDayCare, new { @id = "scheduledReviewerDayCare", @class = "scheduledreviewer" })
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12 p-2">
                                @Html.Partial("_NavTabsTopline")
                                <div class="tab-content" id="nav-tabContent">
                                    <div class="tab-pane active" id="nav-bemp" role="tabpanel" aria-labelledby="nav-bemp-tab">
                                        <div class="form-group row mt-4">
                                            <div class="col-md-4">
                                                <table class="table table-striped table-bordered zero-configuration dataTable">
                                                    <thead>
                                                        <tr>
                                                            <th>Department</th>
                                                            <th>Estimated</th>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <th>
                                                                    ReReview
                                                                </th>
                                                            }
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Building</td>
                                                            <td>
                                                                @if (Model.HrsNABuilding)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursBuilding)
                                                                    @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursBuilding, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursBuilding", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewBuilding == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewBuilding)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewBuilding, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewBuilding", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <td>Electrical</td>
                                                            <td>
                                                                @if (Model.HrsNAElectric)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursElectic)
                                                                    @Html.TextBox("naelectrictxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursElectic, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursElectic", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewElectric == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewElectric)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewElectric, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewElectric", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <td>Mechanical</td>
                                                            <td>
                                                                @if (Model.HrsNAMech)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursMech)
                                                                    @Html.TextBox("namechtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursMech, new { @class = "form-control hrstextbox", @type = "number", @id = "txtHoursMech", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)

                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewMech == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewMech)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewMech, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewMech", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <td>Plumbing</td>
                                                            <td>
                                                                @if (Model.HrsNAPlumbing)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursPlumb)
                                                                    @Html.TextBox("naplumbtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursPlumb, new { @class = "form-control hrstextbox", @type = "number", @id = "txtHoursPlumb", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewPlumb == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewPlumb)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewPlumb, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewPlumb", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="nav-zoning" role="tabpanel" aria-labelledby="nav-zoning-tab">
                                        <div class="form-group row mt-4">
                                            <div class="col-md-4">
                                                <table class="table table-striped table-bordered zero-configuration dataTable">
                                                    <thead>
                                                        <tr>
                                                            <th>Department</th>
                                                            <th>Estimated</th>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <th>
                                                                    ReReview
                                                                </th>
                                                            }
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Zoning</td>
                                                            <td>
                                                                @if (Model.HrsNAZone)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursZoning)
                                                                    @Html.TextBox("nazoningtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursZoning, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursZoning", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewZoning == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewZoning)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewZoning, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewZoning", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="nav-fire" role="tabpanel" aria-labelledby="nav-fire-tab">
                                        <div class="form-group row mt-4">
                                            <div class="col-md-4">
                                                <table class="table table-striped table-bordered zero-configuration dataTable">
                                                    <thead>
                                                        <tr>
                                                            <th>Department</th>
                                                            <th>Estimated</th>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <th>
                                                                    ReReview
                                                                </th>
                                                            }
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Fire</td>
                                                            <td>
                                                                @if (Model.HrsNAFire)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursFire)
                                                                    @Html.TextBox("nafiretxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursFire, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursFire", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewFire == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewFire)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewFire, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewFire", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="nav-backflow" role="tabpanel" aria-labelledby="nav-backflow-tab">
                                        <div class="form-group row mt-4">
                                            <div class="col-md-4">
                                                <table class="table table-striped table-bordered zero-configuration dataTable">
                                                    <thead>
                                                        <tr>
                                                            <th>Department</th>
                                                            <th>Estimated</th>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <th>
                                                                    ReReview
                                                                </th>
                                                            }
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>BackFlow</td>
                                                            <td>
                                                                @if (Model.HrsNABackFlow)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursBackFlow)
                                                                    @Html.TextBox("nabackflowtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursBackFlow, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursBackFlow", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewBackFlow == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewBackFlow)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewBackFlow, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewBackFlow", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="nav-health" role="tabpanel" aria-labelledby="nav-health-tab">
                                        <div class="form-group row mt-4">
                                            <div class="col-md-4">
                                                <table class="table table-striped table-bordered zero-configuration dataTable">
                                                    <thead>
                                                        <tr>
                                                            <th>Department</th>
                                                            <th>Estimated</th>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <th>
                                                                    ReReview
                                                                </th>
                                                            }
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Food Service</td>
                                                            <td>
                                                                @if (Model.HrsNAFood)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursFood)
                                                                    @Html.TextBox("nafoodtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursFood, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursFood", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewFood == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewFood)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewFood, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewFood", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <td>Public Pool</td>
                                                            <td>
                                                                @if (Model.HrsNAPool)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursPool)
                                                                    @Html.TextBox("napooltxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursPool, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursPool", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewPool == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewPool)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewPool, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewPool", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <td>Facility/Lodging</td>
                                                            <td>
                                                                @if (Model.HrsNAFacility)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursLodge)
                                                                    @Html.TextBox("nalodgetxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursLodge, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursLodge", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewLodge == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewLodge)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewLodge, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewLodge", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <td>Commercial Day Care</td>
                                                            <td>
                                                                @if (Model.HrsNADayCare)
                                                                {
                                                                    @Html.HiddenFor(m => m.HoursDayCare)
                                                                    @Html.TextBox("nadaycaretxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                }
                                                                else
                                                                {
                                                                    @Html.TextBoxFor(m => m.HoursDayCare, new { @class = "form-control border-cyan hrstextbox", @type = "number", @id = "txtHoursDayCare", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                }
                                                            </td>
                                                            @if (Model.Cycle > 1)
                                                            {
                                                                <td>
                                                                    @if (Model.ReReviewDayCare == null)
                                                                    {
                                                                        @Html.HiddenFor(m => m.ReReviewDayCare)
                                                                        @Html.TextBox("nabuildingtxt", "NA", new { @disabled = "disabled", @readonly = "readonly", @class = "form-control border-cyan" })
                                                                    }
                                                                    else
                                                                    {
                                                                        @Html.TextBoxFor(m => m.ReReviewDayCare, new { @class = "form-control border-cyan", @type = "number", @id = "txtReReviewDayCare", @name = "appt", @min = "0.50", @max = "9999.00", @step = ".5" }, false)
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="sectionInternalNotes">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                        <div class="form-group">
                            <label for="InternalNotes"> Internal Notes:</label>
                        </div>
                        @Html.TextAreaFor(m => m.InternalNotes, new { @class = "form-control h-25" }, true)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="sectionSchedulingNotes" class="row mb-4 card collapse hide">
        @Html.Partial("_SchedulingNotes", Model)
    </div>


    @Html.Partial("_NotesModal", new AION.Web.Models.Shared.NotesViewModel
        {
            LoggedInUser = Model.LoggedInUser,
            LoggedInUserEmail = Model.LoggedInUserEmail,
            NotesComments = Model.NotesComments,
            Project = Model.Project
        })

    @Html.Partial("_MeetingRoomsModal")

}

